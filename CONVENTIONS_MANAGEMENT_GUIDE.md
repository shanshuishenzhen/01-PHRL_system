# 📋 开发工具模块 - 约定管理功能使用指南

## 🎯 功能概述

开发工具模块现在集成了**约定管理功能**，允许您用明文方式更改、增删约定条件，系统会自动整合进约定系统中。

## 🚀 启动方式

### 方法1：直接启动开发工具
```bash
python developer_tools.py
```

### 方法2：从启动器启动
1. 运行 `python launcher.py`
2. 点击"开发工具"按钮
3. 选择"约定管理"标签页

## 🖥️ 界面介绍

### 📋 **约定管理标签页布局**

```
┌─────────────────────────────────────────────────────────────┐
│                    系统约定管理                              │
├─────────────────┬───────────────────────────────────────────┤
│   约定类别      │            约定内容编辑                    │
│                 │                                           │
│ □ authentication│ 当前路径: authentication                   │
│ □ ui_conventions│                                           │
│ □ exam_conventions│ username: admin                         │
│ □ network_conventions│ password: 123456                    │
│ □ file_conventions│ description: 内置超级用户，拥有所有权限   │
│                 │                                           │
│ [刷新列表][新增类别]│ [保存更改][重置内容][删除约定][验证约定]  │
└─────────────────┴───────────────────────────────────────────┘
```

## 📝 使用方法

### 1. **查看现有约定**

1. 启动开发工具，切换到"约定管理"标签页
2. 左侧列表显示所有约定类别：
   - `authentication` - 认证相关约定
   - `ui_conventions` - UI界面约定
   - `exam_conventions` - 考试相关约定
   - `network_conventions` - 网络配置约定
   - `file_conventions` - 文件处理约定
   - 等等...

3. 点击任意类别，右侧会显示该类别的约定内容

### 2. **修改约定内容**

#### 📝 **明文编辑格式**

约定内容使用简单的**缩进格式**，类似YAML：

```
super_admin:
  username: admin
  password: 123456
  description: 内置超级用户，拥有所有权限
  auto_grant: true

default_permissions:
  student:
    - exam_take
    - view_results
  teacher:
    - exam_create
    - exam_manage
  admin:
    - all
```

#### 🔧 **编辑步骤**

1. **选择约定类别**：点击左侧列表中的类别
2. **编辑内容**：在右侧文本框中直接修改
3. **保存更改**：点击"保存更改"按钮
4. **确认保存**：在弹出的确认对话框中点击"是"

#### ✏️ **编辑规则**

- **缩进**：使用2个空格表示层级关系
- **键值对**：格式为 `key: value`
- **列表**：使用 `- item` 格式
- **嵌套**：通过缩进表示嵌套结构
- **数据类型**：
  - 字符串：直接输入
  - 数字：输入数字
  - 布尔值：`true` 或 `false`
  - 列表：使用 `-` 开头

### 3. **新增约定类别**

1. 点击"新增类别"按钮
2. 输入新类别名称（只能包含字母、数字、下划线）
3. 系统会创建一个包含示例内容的新类别
4. 编辑新类别的内容并保存

### 4. **删除约定**

1. 选择要删除的约定类别
2. 点击"删除约定"按钮
3. 在确认对话框中点击"是"
4. **注意**：删除操作不可恢复！

### 5. **验证约定**

1. 点击"验证约定"按钮
2. 系统会检查所有约定配置的正确性
3. 如有问题，会显示详细的错误信息

## 📋 常用约定修改示例

### 🔐 **修改超级管理员密码**

1. 选择 `authentication` 类别
2. 找到以下内容：
   ```
   super_admin:
     username: admin
     password: 123456
   ```
3. 修改密码：
   ```
   super_admin:
     username: admin
     password: new_secure_password
   ```
4. 保存更改

### 📝 **修改判断题选项**

1. 选择 `exam_conventions` 类别
2. 找到：
   ```
   question_types:
     true_false:
       options:
         - 正确
         - 错误
   ```
3. 可以修改为：
   ```
   question_types:
     true_false:
       options:
         - 是
         - 否
   ```

### 🎨 **修改UI主题色**

1. 选择 `ui_conventions` 类别
2. 找到：
   ```
   theme:
     primary_color: #2196F3
     secondary_color: #FFC107
   ```
3. 修改颜色：
   ```
   theme:
     primary_color: #FF5722
     secondary_color: #4CAF50
   ```

### 🌐 **修改默认端口**

1. 选择 `network_conventions` 类别
2. 找到：
   ```
   default_ports:
     main_console: 8000
     question_bank: 5000
   ```
3. 修改端口：
   ```
   default_ports:
     main_console: 9000
     question_bank: 6000
   ```

## ⚠️ 注意事项

### 🔒 **安全提醒**
- 修改超级管理员密码后，请确保记住新密码
- 删除约定类别前请确认不再需要
- 建议在修改前备份 `system_conventions.json` 文件

### 📝 **格式要求**
- 严格遵循缩进格式（2个空格）
- 键名不能包含特殊字符
- 字符串值如包含特殊字符请用引号包围

### 🔍 **验证建议**
- 每次修改后都运行验证功能
- 如果验证失败，请检查格式是否正确
- 保存前可以点击"重置内容"恢复原始内容

## 🎯 实际应用效果

### ✅ **修改后的自动应用**

当您修改约定后，系统会：

1. **立即生效**：新的约定配置立即保存到文件
2. **自动应用**：下次启动相关模块时自动应用新约定
3. **全局一致**：所有模块都会使用新的约定配置

### 📋 **应用示例**

修改超级管理员密码后：
- 所有登录模块都会使用新密码
- 客户端、主控台、用户管理等模块自动更新
- 无需手动修改各个模块的代码

## 🎉 总结

通过开发工具模块的约定管理功能，您可以：

- ✅ **可视化管理**：图形界面管理所有约定
- ✅ **明文编辑**：简单直观的文本格式
- ✅ **实时验证**：即时检查配置正确性
- ✅ **自动整合**：修改后自动应用到系统
- ✅ **安全操作**：确认对话框防止误操作

**现在您可以轻松管理系统的所有约定条件了！** 🚀
