# 🚀 PH&RL 客户端快速部署指南

## 📋 部署概览

本指南提供PH&RL考试系统客户端与服务器通信的快速配置方法，适用于局域网环境下的批量部署。

## ⚡ 快速开始

### 1. 环境准备

#### **服务器端**
```bash
# 确保服务器正在运行
服务器IP: 192.168.1.100
端口: 5000
状态: 运行中
```

#### **客户端要求**
- Windows 10/11
- 网络连接正常
- 防火墙允许5000端口

### 2. 一键配置

#### **方法一：使用配置工具**
```bash
# 运行网络配置工具
python standalone_client/network_setup_tool.py

# 选择选项2配置服务器
# 输入服务器IP: 192.168.1.100
# 输入端口: 5000
# 选择协议: http
# 设置超时: 30
```

#### **方法二：直接修改配置文件**
编辑 `standalone_client/config/client_config.json`：
```json
{
    "server": {
        "host": "192.168.1.100",
        "port": 5000,
        "protocol": "http",
        "timeout": 30
    }
}
```

#### **方法三：批量部署**
```bash
# 运行批量部署工具
python batch_deploy_config.py

# 选择选项1批量部署
# 输入服务器IP: 192.168.1.100
# 输入目标目录列表
```

### 3. 连接测试

```bash
# 运行连接测试
python standalone_client/network_setup_tool.py

# 选择选项3测试连接
# 查看测试结果
```

## 🔧 常用配置

### 标准局域网配置
```json
{
    "server": {
        "host": "192.168.1.100",
        "port": 5000,
        "protocol": "http",
        "timeout": 30,
        "retry_count": 3,
        "retry_delay": 5
    }
}
```

### 高延迟网络配置
```json
{
    "server": {
        "host": "192.168.1.100",
        "port": 5000,
        "protocol": "http",
        "timeout": 60,
        "retry_count": 5,
        "retry_delay": 10
    }
}
```

### HTTPS安全配置
```json
{
    "server": {
        "host": "192.168.1.100",
        "port": 443,
        "protocol": "https",
        "timeout": 30,
        "retry_count": 3,
        "retry_delay": 5
    }
}
```

## 🛠️ 故障排除

### 常见问题速查

| 问题 | 原因 | 解决方案 |
|------|------|----------|
| 连接超时 | 网络延迟或服务器无响应 | 增加timeout值到60秒 |
| 端口拒绝连接 | 防火墙阻止或服务器未启动 | 检查防火墙和服务器状态 |
| DNS解析失败 | 域名无法解析 | 使用IP地址代替域名 |
| 认证失败 | 用户名密码错误 | 检查登录凭据 |

### 快速诊断命令

```bash
# 测试网络连通性
ping 192.168.1.100

# 测试端口开放
telnet 192.168.1.100 5000

# 运行诊断工具
python standalone_client/network_setup_tool.py
# 选择选项4进行网络诊断
```

## 📦 批量部署

### 场景1：本地多目录部署
```bash
# 准备目录列表
D:/ExamClient_PC01
D:/ExamClient_PC02
D:/ExamClient_PC03

# 运行批量部署
python batch_deploy_config.py
# 选择选项1
# 输入服务器IP和目录列表
```

### 场景2：网络共享部署
```bash
# 准备网络路径
\\192.168.1.101\ExamClient
\\192.168.1.102\ExamClient
\\192.168.1.103\ExamClient

# 运行网络部署
python batch_deploy_config.py
# 选择选项2
# 输入服务器IP和网络路径
```

### 场景3：批处理脚本部署
```bash
# 生成批处理脚本
python batch_deploy_config.py
# 选择选项3
# 输入服务器IP
# 生成deploy_config.bat

# 在各客户机运行
deploy_config.bat
```

## 🔍 验证部署

### 自动验证
```bash
# 运行验证工具
python batch_deploy_config.py
# 选择选项4
# 输入要验证的目录列表
```

### 手动验证
1. 检查配置文件是否存在
2. 验证服务器IP是否正确
3. 测试网络连接
4. 尝试登录客户端

## 📋 部署检查清单

### 服务器端检查
- [ ] 服务器程序正在运行
- [ ] 端口5000已开放
- [ ] 防火墙规则已配置
- [ ] 数据库连接正常

### 客户端检查
- [ ] 网络连接正常
- [ ] 配置文件已部署
- [ ] 服务器地址正确
- [ ] 连接测试通过

### 网络环境检查
- [ ] 局域网连通性正常
- [ ] DNS解析正常（如使用域名）
- [ ] 防火墙允许通信
- [ ] 网络延迟可接受

## 🎯 最佳实践

### 1. 网络规划
- 使用固定IP地址
- 配置合适的子网掩码
- 确保网络稳定性

### 2. 安全配置
- 使用强密码
- 定期更新配置
- 监控异常连接

### 3. 性能优化
- 使用有线网络连接
- 配置合适的超时时间
- 启用连接缓存

### 4. 运维管理
- 建立配置备份
- 定期检查连接状态
- 记录部署日志

## 🆘 紧急处理

### 服务器无法连接
1. 检查服务器状态
2. 重启服务器程序
3. 检查网络连接
4. 联系技术支持

### 批量连接失败
1. 验证服务器配置
2. 检查网络环境
3. 重新部署配置
4. 逐个排查客户端

### 性能问题
1. 增加超时时间
2. 减少重试次数
3. 检查网络带宽
4. 优化服务器性能

## 📞 技术支持

- **配置问题**：检查配置文件格式和内容
- **网络问题**：使用诊断工具排查
- **性能问题**：调整超时和重试参数
- **安全问题**：检查防火墙和认证设置

---

**💡 提示**：建议在正式部署前先在测试环境中验证所有配置和功能。
