# 主控台模块 (Main Console)

## 模块概述

主控台模块是PH&RL在线考试系统的核心控制中心，提供统一的界面来管理和监控系统各个功能模块。它负责启动、停止和监控各个模块的运行状态，显示系统资源使用情况，并提供日志查看和系统设置功能。

## 主要功能

### 模块管理
- **启动/停止/重启模块**：可以单独或批量控制各个功能模块的运行状态
- **状态监控**：实时显示各模块的运行状态和端口信息
- **自动重启**：可配置自动重启崩溃的模块

### 系统监控
- **资源监控**：显示CPU、内存和磁盘使用情况
- **日志查看**：集中查看各模块的运行日志
- **系统信息**：显示系统版本、运行环境等信息

### 系统设置
- **常规设置**：语言、自动重启、资源监控等
- **模块设置**：各模块的端口配置
- **日志设置**：日志级别、文件大小、备份数量等

## 技术架构

### 开发技术
- **编程语言**：Python 3.6+
- **GUI框架**：Tkinter
- **进程管理**：subprocess, psutil
- **国际化**：自定义i18n模块

### 系统架构
主控台采用模块化设计，主要包含以下组件：
- **UI组件**：提供统一的界面元素和主题
- **进程管理器**：负责模块的启动、停止和状态监控
- **系统检查器**：检查系统环境和资源状态
- **配置管理器**：管理系统配置
- **日志管理器**：提供统一的日志记录功能

## 文件结构
```
main_console/
└── main_console.py  # 主控台应用程序
```

## 依赖模块
主控台依赖common目录下的多个公共模块：
- logger：日志记录
- system_checker：系统检查
- config_manager：配置管理
- process_manager：进程管理
- ui_components：UI组件
- error_handler：错误处理
- file_manager：文件管理
- i18n_manager：国际化支持

## 快速开始

### 环境要求
- Python 3.6+
- Tkinter库
- psutil库（可选，用于资源监控）

### 启动方式
1. **通过系统启动器启动**：
   ```
   python start_system.py
   ```
   然后点击"启动主控台"按钮

2. **直接启动**：
   ```
   python main_console/main_console.py
   ```

## 使用流程

1. **启动主控台**：运行主控台应用程序
2. **初始化系统**：系统自动检查环境和依赖
3. **启动模块**：点击"启动所有模块"或选择特定模块启动
4. **监控状态**：查看模块状态和系统资源使用情况
5. **查看日志**：选择模块查看其运行日志
6. **系统设置**：根据需要调整系统配置

## 配置说明

### 系统配置
系统配置存储在项目根目录的config.json文件中，包含以下主要配置项：

- **version**：系统版本
- **min_python_version**：最低Python版本要求
- **required_disk_space_mb**：所需磁盘空间
- **module_ports**：各模块使用的端口
- **auto_restart_crashed_modules**：是否自动重启崩溃的模块
- **logging**：日志配置（级别、文件大小、备份数量等）

### 界面配置
主控台界面可通过系统设置进行调整，包括：

- **语言设置**：支持多语言切换
- **资源监控**：是否显示资源监控
- **模块端口**：各模块的端口配置

## 与其他模块的集成

主控台模块与系统其他模块的集成主要通过以下方式：

1. **进程管理**：启动、停止和监控其他模块的进程
2. **配置共享**：通过共享配置文件与其他模块交换配置信息
3. **日志集中**：集中查看各模块的日志文件

## 故障排除

### 常见问题

1. **模块启动失败**
   - 检查模块文件是否存在
   - 检查端口是否被占用
   - 查看日志获取详细错误信息

2. **资源监控不显示**
   - 检查是否安装了psutil库
   - 确认系统设置中已启用资源监控

3. **界面显示异常**
   - 检查Python版本是否满足要求
   - 确认Tkinter库正确安装

### 错误代码说明

- **E001**：模块文件不存在
- **E002**：端口被占用
- **E003**：模块启动超时
- **E004**：模块崩溃
- **E005**：配置文件错误

## 性能优化

### 资源使用
- 主控台本身资源占用较低，适合长时间运行
- 资源监控功能会略微增加CPU使用率，可在不需要时关闭

### 启动性能
- 系统初始化时会进行环境检查，可能需要几秒钟时间
- 启动多个模块时采用异步方式，避免界面卡顿

## 版本历史

### v1.0.0 (2024-07-01)
- 初始版本发布
- 支持基本的模块管理和监控功能
- 提供系统设置和日志查看

### 下一步计划
- 添加模块健康检查功能
- 增强资源监控和预警
- 支持远程管理和监控
- 添加系统备份和恢复功能

## 技术支持

如有问题或需要技术支持，请联系：

- **邮箱**：support@phrl-exam.com
- **网站**：https://www.phrl-exam.com
- **技术文档**：参见项目docs目录